<html>
  <head>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
  </head>
    <body>

        <a href="#" onclick="login()"> LOGIN </a>
        <a href="http://localhost:3000/api/logout"> LOGOUT </a>
        <a href="#" id="proj" onclick="alertProj()"> PROJECTS </a>


        <script type="text/javascript">
         var login = function() {
             var popup = window.open("/popuptest.html");
             iid = setInterval(function() {
                 popup.postMessage("ping","http://localhost:8080");
             },500);
             var receiveMessage = function(e) {
                 alert(e.data);
                 clearInterval(iid);
             }
             window.addEventListener("message", receiveMessage, false);
         }

         // cors
         $.ajaxSetup({
             xhrFields: {
                 withCredentials: true
             },
             crossDomain: true
         });

         var alertProj = function() {
             $.get('http://localhost:3000/api/projects') .then(res => {
                 alert('got data: ' + res);
             }).fail((xhr, text, code) => {
                 alert('req failed: ' + code);
             })
         }
        </script>
    </body>
</html>
